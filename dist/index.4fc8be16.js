function e(e){return e&&e.__esModule?e.default:e}self,(()=>{var e={227:(e,t,n)=>{var r=n(155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(447)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},447:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,o,s=null;function a(...e){if(!a.enabled)return;const r=a,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const o=t.formatters[i];if("function"==typeof o){const t=e[s];n=o.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},856:function(e){e.exports=function(){var e=Object.hasOwnProperty,t=Object.setPrototypeOf,n=Object.isFrozen,r=Object.getPrototypeOf,i=Object.getOwnPropertyDescriptor,o=Object.freeze,s=Object.seal,a=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,u=l.construct;c||(c=function(e,t,n){return e.apply(t,n)}),o||(o=function(e){return e}),s||(s=function(e){return e}),u||(u=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var p,h=w(Array.prototype.forEach),d=w(Array.prototype.pop),f=w(Array.prototype.push),m=w(String.prototype.toLowerCase),g=w(String.prototype.match),y=w(String.prototype.replace),_=w(String.prototype.indexOf),v=w(String.prototype.trim),b=w(RegExp.prototype.test),x=(p=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(p,t)});function w(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return c(e,t,r)}}function C(e,r){t&&t(e,null);for(var i=r.length;i--;){var o=r[i];if("string"==typeof o){var s=m(o);s!==o&&(n(r)||(r[i]=s),o=s)}e[o]=!0}return e}function T(t){var n=a(null),r=void 0;for(r in t)c(e,t,[r])&&(n[r]=t[r]);return n}function S(e,t){for(;null!==e;){var n=i(e,t);if(n){if(n.get)return w(n.get);if("function"==typeof n.value)return w(n.value)}e=r(e)}return function(e){return console.warn("fallback value for",e),null}}var k=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),L=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),A=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),E=o(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),F=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),M=o(["#text"]),I=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),j=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),N=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),P=s(/\{\{[\s\S]*|[\s\S]*\}\}/gm),R=s(/<%[\s\S]*|[\s\S]*%>/gm),D=s(/^data-[\-\w.\u00B7-\uFFFF]/),U=s(/^aria-[\-\w]+$/),H=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B=s(/^(?:\w+script|data):/i),$=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function G(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var q=function(){return"undefined"==typeof window?null:window},W=function(e,t){if("object"!==(void 0===e?"undefined":K(e))||"function"!=typeof e.createPolicy)return null;var n=null,r="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(r)&&(n=t.currentScript.getAttribute(r));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q(),n=function(t){return e(t)};if(n.version="2.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;var r=t.document,i=t.document,s=t.DocumentFragment,a=t.HTMLTemplateElement,l=t.Node,c=t.Element,u=t.NodeFilter,p=t.NamedNodeMap,w=void 0===p?t.NamedNodeMap||t.MozNamedAttrMap:p,J=t.Text,V=t.Comment,Z=t.DOMParser,X=t.trustedTypes,Y=c.prototype,Q=S(Y,"cloneNode"),ee=S(Y,"nextSibling"),te=S(Y,"childNodes"),ne=S(Y,"parentNode");if("function"==typeof a){var re=i.createElement("template");re.content&&re.content.ownerDocument&&(i=re.content.ownerDocument)}var ie=W(X,r),oe=ie&&Pe?ie.createHTML(""):"",se=i,ae=se.implementation,le=se.createNodeIterator,ce=se.createDocumentFragment,ue=se.getElementsByTagName,pe=r.importNode,he={};try{he=T(i).documentMode?i.documentMode:{}}catch(e){}var de={};n.isSupported="function"==typeof ne&&ae&&void 0!==ae.createHTMLDocument&&9!==he;var fe=P,me=R,ge=D,ye=U,_e=B,ve=$,be=H,xe=null,we=C({},[].concat(G(k),G(L),G(A),G(O),G(M))),Ce=null,Te=C({},[].concat(G(I),G(j),G(N),G(z))),Se=null,ke=null,Le=!0,Ae=!0,Ee=!1,Oe=!1,Fe=!1,Me=!1,Ie=!1,je=!1,Ne=!1,ze=!0,Pe=!1,Re=!0,De=!0,Ue=!1,He={},Be=null,$e=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ke=null,Ge=C({},["audio","video","img","source","image","track"]),qe=null,We=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Je="http://www.w3.org/1998/Math/MathML",Ve="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",Xe=Ze,Ye=!1,Qe=null,et=i.createElement("form"),tt=function(e){Qe&&Qe===e||(e&&"object"===(void 0===e?"undefined":K(e))||(e={}),e=T(e),xe="ALLOWED_TAGS"in e?C({},e.ALLOWED_TAGS):we,Ce="ALLOWED_ATTR"in e?C({},e.ALLOWED_ATTR):Te,qe="ADD_URI_SAFE_ATTR"in e?C(T(We),e.ADD_URI_SAFE_ATTR):We,Ke="ADD_DATA_URI_TAGS"in e?C(T(Ge),e.ADD_DATA_URI_TAGS):Ge,Be="FORBID_CONTENTS"in e?C({},e.FORBID_CONTENTS):$e,Se="FORBID_TAGS"in e?C({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?C({},e.FORBID_ATTR):{},He="USE_PROFILES"in e&&e.USE_PROFILES,Le=!1!==e.ALLOW_ARIA_ATTR,Ae=!1!==e.ALLOW_DATA_ATTR,Ee=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Oe=e.SAFE_FOR_TEMPLATES||!1,Fe=e.WHOLE_DOCUMENT||!1,je=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,ze=!1!==e.RETURN_DOM_IMPORT,Pe=e.RETURN_TRUSTED_TYPE||!1,Ie=e.FORCE_BODY||!1,Re=!1!==e.SANITIZE_DOM,De=!1!==e.KEEP_CONTENT,Ue=e.IN_PLACE||!1,be=e.ALLOWED_URI_REGEXP||be,Xe=e.NAMESPACE||Ze,Oe&&(Ae=!1),Ne&&(je=!0),He&&(xe=C({},[].concat(G(M))),Ce=[],!0===He.html&&(C(xe,k),C(Ce,I)),!0===He.svg&&(C(xe,L),C(Ce,j),C(Ce,z)),!0===He.svgFilters&&(C(xe,A),C(Ce,j),C(Ce,z)),!0===He.mathMl&&(C(xe,O),C(Ce,N),C(Ce,z))),e.ADD_TAGS&&(xe===we&&(xe=T(xe)),C(xe,e.ADD_TAGS)),e.ADD_ATTR&&(Ce===Te&&(Ce=T(Ce)),C(Ce,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&C(qe,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Be===$e&&(Be=T(Be)),C(Be,e.FORBID_CONTENTS)),De&&(xe["#text"]=!0),Fe&&C(xe,["html","head","body"]),xe.table&&(C(xe,["tbody"]),delete Se.tbody),o&&o(e),Qe=e)},nt=C({},["mi","mo","mn","ms","mtext"]),rt=C({},["foreignobject","desc","title","annotation-xml"]),it=C({},L);C(it,A),C(it,E);var ot=C({},O);C(ot,F);var st=function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:Ze,tagName:"template"});var n=m(e.tagName),r=m(t.tagName);if(e.namespaceURI===Ve)return t.namespaceURI===Ze?"svg"===n:t.namespaceURI===Je?"svg"===n&&("annotation-xml"===r||nt[r]):Boolean(it[n]);if(e.namespaceURI===Je)return t.namespaceURI===Ze?"math"===n:t.namespaceURI===Ve?"math"===n&&rt[r]:Boolean(ot[n]);if(e.namespaceURI===Ze){if(t.namespaceURI===Ve&&!rt[r])return!1;if(t.namespaceURI===Je&&!nt[r])return!1;var i=C({},["title","style","font","a","script"]);return!ot[n]&&(i[n]||!it[n])}return!1},at=function(e){f(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=oe}catch(t){e.remove()}}},lt=function(e,t){try{f(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){f(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Ce[e])if(je||Ne)try{at(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ct=function(e){var t=void 0,n=void 0;if(Ie)e="<remove></remove>"+e;else{var r=g(e,/^[\r\n\t ]+/);n=r&&r[0]}var o=ie?ie.createHTML(e):e;if(Xe===Ze)try{t=(new Z).parseFromString(o,"text/html")}catch(e){}if(!t||!t.documentElement){t=ae.createDocument(Xe,"template",null);try{t.documentElement.innerHTML=Ye?"":o}catch(e){}}var s=t.body||t.documentElement;return e&&n&&s.insertBefore(i.createTextNode(n),s.childNodes[0]||null),Xe===Ze?ue.call(t,Fe?"html":"body")[0]:Fe?t.documentElement:s},ut=function(e){return le.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},pt=function(e){return!(e instanceof J||e instanceof V||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof w&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},ht=function(e){return"object"===(void 0===l?"undefined":K(l))?e instanceof l:e&&"object"===(void 0===e?"undefined":K(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},dt=function(e,t,r){de[e]&&h(de[e],(function(e){e.call(n,t,r,Qe)}))},ft=function(e){var t=void 0;if(dt("beforeSanitizeElements",e,null),pt(e))return at(e),!0;if(g(e.nodeName,/[\u0080-\uFFFF]/))return at(e),!0;var r=m(e.nodeName);if(dt("uponSanitizeElement",e,{tagName:r,allowedTags:xe}),!ht(e.firstElementChild)&&(!ht(e.content)||!ht(e.content.firstElementChild))&&b(/<[/\w]/g,e.innerHTML)&&b(/<[/\w]/g,e.textContent))return at(e),!0;if("select"===r&&b(/<template/i,e.innerHTML))return at(e),!0;if(!xe[r]||Se[r]){if(De&&!Be[r]){var i=ne(e)||e.parentNode,o=te(e)||e.childNodes;if(o&&i)for(var s=o.length-1;s>=0;--s)i.insertBefore(Q(o[s],!0),ee(e))}return at(e),!0}return e instanceof c&&!st(e)?(at(e),!0):"noscript"!==r&&"noembed"!==r||!b(/<\/no(script|embed)/i,e.innerHTML)?(Oe&&3===e.nodeType&&(t=e.textContent,t=y(t,fe," "),t=y(t,me," "),e.textContent!==t&&(f(n.removed,{element:e.cloneNode()}),e.textContent=t)),dt("afterSanitizeElements",e,null),!1):(at(e),!0)},mt=function(e,t,n){if(Re&&("id"===t||"name"===t)&&(n in i||n in et))return!1;if(Ae&&!ke[t]&&b(ge,t));else if(Le&&b(ye,t));else{if(!Ce[t]||ke[t])return!1;if(qe[t]);else if(b(be,y(n,ve,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==_(n,"data:")||!Ke[e])if(Ee&&!b(_e,y(n,ve,"")));else if(n)return!1}return!0},gt=function(e){var t=void 0,r=void 0,i=void 0,o=void 0;dt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ce};for(o=s.length;o--;){var l=t=s[o],c=l.name,u=l.namespaceURI;if(r=v(t.value),i=m(c),a.attrName=i,a.attrValue=r,a.keepAttr=!0,a.forceKeepAttr=void 0,dt("uponSanitizeAttribute",e,a),r=a.attrValue,!a.forceKeepAttr&&(lt(c,e),a.keepAttr))if(b(/\/>/i,r))lt(c,e);else{Oe&&(r=y(r,fe," "),r=y(r,me," "));var p=e.nodeName.toLowerCase();if(mt(p,i,r))try{u?e.setAttributeNS(u,c,r):e.setAttribute(c,r),d(n.removed)}catch(e){}}}dt("afterSanitizeAttributes",e,null)}},yt=function e(t){var n=void 0,r=ut(t);for(dt("beforeSanitizeShadowDOM",t,null);n=r.nextNode();)dt("uponSanitizeShadowNode",n,null),ft(n)||(n.content instanceof s&&e(n.content),gt(n));dt("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e,i){var o=void 0,a=void 0,c=void 0,u=void 0,p=void 0;if((Ye=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!ht(e)){if("function"!=typeof e.toString)throw x("toString is not a function");if("string"!=typeof(e=e.toString()))throw x("dirty is not a string, aborting")}if(!n.isSupported){if("object"===K(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(ht(e))return t.toStaticHTML(e.outerHTML)}return e}if(Me||tt(i),n.removed=[],"string"==typeof e&&(Ue=!1),Ue);else if(e instanceof l)1===(a=(o=ct("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?o=a:o.appendChild(a);else{if(!je&&!Oe&&!Fe&&-1===e.indexOf("<"))return ie&&Pe?ie.createHTML(e):e;if(!(o=ct(e)))return je?null:oe}o&&Ie&&at(o.firstChild);for(var h=ut(Ue?e:o);c=h.nextNode();)3===c.nodeType&&c===u||ft(c)||(c.content instanceof s&&yt(c.content),gt(c),u=c);if(u=null,Ue)return e;if(je){if(Ne)for(p=ce.call(o.ownerDocument);o.firstChild;)p.appendChild(o.firstChild);else p=o;return ze&&(p=pe.call(r,p,!0)),p}var d=Fe?o.outerHTML:o.innerHTML;return Oe&&(d=y(d,fe," "),d=y(d,me," ")),ie&&Pe?ie.createHTML(d):d},n.setConfig=function(e){tt(e),Me=!0},n.clearConfig=function(){Qe=null,Me=!1},n.isValidAttribute=function(e,t,n){Qe||tt({});var r=m(e),i=m(t);return mt(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&(de[e]=de[e]||[],f(de[e],t))},n.removeHook=function(e){de[e]&&d(de[e])},n.removeHooks=function(e){de[e]&&(de[e]=[])},n.removeAllHooks=function(){de={}},n}()}()},729:e=>{var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(p-1);c<p;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,d=u.length;for(c=0;c<d;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),p){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(p-1);h<p;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,s){s=s||{};var a,l,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&isFinite(e))return s.long?(a=e,(l=Math.abs(a))>=i?o(a,l,i,"day"):l>=r?o(a,l,r,"hour"):l>=n?o(a,l,n,"minute"):l>=t?o(a,l,t,"second"):a+" ms"):function(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=r?Math.round(e/r)+"h":o>=n?Math.round(e/n)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},520:(e,t,n)=>{var r=n(155),i="win32"===r.platform,o=n(539);function s(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(i))}return n}function a(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function p(e){var t=l.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",i=c.exec(r);return[n,i[1],i[2],i[3]]}function h(e){var t=l.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function d(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var e="",t="",n=!1,i=arguments.length-1;i>=-1;i--){var a;if(i>=0?a=arguments[i]:e?(a=r.env["="+e])&&a.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(a=e+"\\"):a=r.cwd(),!o.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var l=h(a),c=l.device,u=l.isUnc,p=l.isAbsolute,f=l.tail;if((!c||!e||c.toLowerCase()===e.toLowerCase())&&(e||(e=c),n||(t=f+"\\"+t,n=p),e&&n))break}}return u&&(e=d(e)),e+(n?"\\":"")+(t=s(t.split(/[\\\/]+/),!n).join("\\"))||"."},u.normalize=function(e){var t=h(e),n=t.device,r=t.isUnc,i=t.isAbsolute,o=t.tail,a=/[\\\/]$/.test(o);return(o=s(o.split(/[\\\/]+/),!i).join("\\"))||i||(o="."),o&&a&&(o+="\\"),r&&(n=d(n)),n+(i?"\\":"")+o},u.isAbsolute=function(e){return h(e).isAbsolute},u.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!o.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(e,t){e=u.resolve(e),t=u.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),i=a(t.split("\\")),o=a(n.split("\\")),s=a(r.split("\\")),l=Math.min(o.length,s.length),c=l,p=0;p<l;p++)if(o[p]!==s[p]){c=p;break}if(0==c)return t;var h=[];for(p=c;p<o.length;p++)h.push("..");return(h=h.concat(i.slice(c))).join("\\")},u._makeLong=function(e){if(!o.isString(e))return e;if(!e)return"";var t=u.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},u.dirname=function(e){var t=p(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(e,t){var n=p(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return p(e)[3]},u.format=function(e){if(!o.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!o.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(e){if(!o.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=p(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},u.sep="\\",u.delimiter=";";var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={};function g(e){return f.exec(e).slice(1)}m.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:r.cwd();if(!o.isString(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i[0])}return(t?"/":"")+(e=s(e.split("/"),!t).join("/"))||"."},m.normalize=function(e){var t=m.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=s(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},m.isAbsolute=function(e){return"/"===e.charAt(0)},m.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!o.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return m.normalize(e)},m.relative=function(e,t){e=m.resolve(e).substr(1),t=m.resolve(t).substr(1);for(var n=a(e.split("/")),r=a(t.split("/")),i=Math.min(n.length,r.length),o=i,s=0;s<i;s++)if(n[s]!==r[s]){o=s;break}var l=[];for(s=o;s<n.length;s++)l.push("..");return(l=l.concat(r.slice(o))).join("/")},m._makeLong=function(e){return e},m.dirname=function(e){var t=g(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},m.basename=function(e,t){var n=g(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},m.extname=function(e){return g(e)[3]},m.format=function(e){if(!o.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!o.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+m.sep:"")+(e.base||"")},m.parse=function(e){if(!o.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=g(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},m.sep="/",m.delimiter=":",e.exports=i?u:m,e.exports.posix=m,e.exports.win32=u},155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,l=[],c=!1,u=-1;function p(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},539:(e,t,n)=>{var r=n(155),i=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),l=r[n];n<o;l=r[++n])m(l)||!b(l)?s+=" "+l:s+=" "+a(l);return s},t.deprecate=function(e,i){if(_(n.g.process))return function(){return t.deprecate(e,i).apply(this,arguments)};if(!0===r.noDeprecation)return e;var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,s={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return y(i)||(i=u(e,i,r)),i}var o=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(n)),w(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(C(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(v(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return p(n)}var c,b="",T=!1,S=["{","}"];return d(n)&&(T=!0,S=["[","]"]),C(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(b=" "+RegExp.prototype.toString.call(n)),x(n)&&(b=" "+Date.prototype.toUTCString.call(n)),w(n)&&(b=" "+p(n)),0!==s.length||T&&0!=n.length?r<0?v(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=T?function(e,t,n,r,i){for(var o=[],s=0,a=t.length;s<a;++s)A(t,String(s))?o.push(h(e,t,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,a,s):s.map((function(t){return h(e,n,r,a,t,T)})),e.seen.pop(),function(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,b,S)):S[0]+b+S[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),A(r,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(n)?u(e,l.value,null):u(e,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function _(e){return void 0===e}function v(e){return b(e)&&"[object RegExp]"===T(e)}function b(e){return"object"==typeof e&&null!==e}function x(e){return b(e)&&"[object Date]"===T(e)}function w(e){return b(e)&&("[object Error]"===T(e)||e instanceof Error)}function C(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(_(o)&&(o=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=_,t.isRegExp=v,t.isObject=b,t.isDate=x,t.isError=w,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",L(),t.format.apply(t,arguments))},t.inherits=n(717),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{LSPluginUser:()=>H,setupPluginUserInstance:()=>B});var e=n(520);n(856);const t="win32"===navigator.platform.toLowerCase()?e.win32:e.posix;function i(e){return e===Object(e)&&!Array.isArray(e)}function o(e,...t){if(!t.length)return e;const n=e;if(i(n)){const e=t.length;for(let r=0;r<e;r+=1){const e=t[r];if(i(e))for(const t in e)e.hasOwnProperty(t)&&(i(e[t])?(n[t]&&i(n[t])||(n[t]={}),o(n[t],e[t])):Array.isArray(n[t])&&Array.isArray(e[t])?n[t]=Array.from(new Set(n[t].concat(e[t]))):n[t]=e[t])}}return n}function s(e,t){let n,r,i=!1;const o=t=>n=>{e&&clearTimeout(e),t(n),i=!0},s=new Promise(((i,s)=>{n=o(i),r=o(s),e&&(e=setTimeout((()=>r(new Error(`[deferred timeout] ${t}`))),e))}));return{created:Date.now(),setTag:e=>t=e,resolve:n,reject:r,promise:s,get settled(){return i}}}new Map;var a=n(227),l=n.n(a);const c="application/x-postmate-v1+json";let u=0;const p={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},h=(e,t)=>!("string"==typeof t&&e.origin!==t||!e.data||"object"==typeof e.data&&!("postmate"in e.data)||e.data.type!==c||!p[e.data.postmate]);class d{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=e=>{if(!h(e,this.childOrigin))return!1;const{data:t,name:n}=((e||{}).data||{}).value||{};"emit"===e.data.postmate&&n in this.events&&this.events[n].forEach((e=>{e.call(this,t)}))},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise((t=>{const n=++u,r=e=>{e.data.uid===n&&"reply"===e.data.postmate&&(this.parent.removeEventListener("message",r,!1),t(e.data.value))};this.parent.addEventListener("message",r,!1),this.child.postMessage({postmate:"request",type:c,property:e,uid:n},this.childOrigin)}))}call(e,t){this.child.postMessage({postmate:"call",type:c,property:e,data:t},this.childOrigin)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class f{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",(e=>{if(!h(e,this.parentOrigin))return;const{property:t,uid:n,data:r}=e.data;"call"!==e.data.postmate?((e,t)=>{const n="function"==typeof e[t]?e[t]():e[t];return Promise.resolve(n)})(this.model,t).then((r=>{e.source.postMessage({property:t,postmate:"reply",type:c,uid:n,value:r},e.origin)})):t in this.model&&"function"==typeof this.model[t]&&this.model[t](r)}))}emit(e,t){this.parent.postMessage({postmate:"emit",type:c,value:{name:e,data:t}},this.parentOrigin)}}class m{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const t=(e=>{const t=document.createElement("a");t.href=e;const n=t.protocol.length>4?t.protocol:window.location.protocol,r=t.host.length?"80"===t.port||"443"===t.port?t.hostname:t.host:window.location.host;return t.origin||`${n}//${r}`})(e=e||this.url);let n,r=0;return new Promise(((i,o)=>{const s=e=>!!h(e,t)&&("handshake-reply"===e.data.postmate?(clearInterval(n),this.parent.removeEventListener("message",s,!1),this.childOrigin=e.origin,i(new d(this))):o("Failed handshake"));this.parent.addEventListener("message",s,!1);const a=()=>{r++,this.child.postMessage({postmate:"handshake",type:c,model:this.model},t),5===r&&clearInterval(n)};this.frame.addEventListener("load",(()=>{a(),n=setInterval(a,500)})),this.frame.src=e}))}}class g{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise(((e,t)=>{const n=r=>{if(r.data.postmate){if("handshake"===r.data.postmate){this.child.removeEventListener("message",n,!1),r.source.postMessage({postmate:"handshake-reply",type:c},r.origin),this.parentOrigin=r.origin;const t=r.data.model;return t&&Object.keys(t).forEach((e=>{this.model[e]=t[e]})),e(new f(this))}return t("Handshake Reply Failed")}};this.child.addEventListener("message",n,!1)}))}}var y=n(729),_=n.n(y);const{importHTML:v,createSandboxContainer:b}=window.QSandbox||{};function x(e,t){return e.startsWith("http")?fetch(e,t):(e=e.replace("file://",""),new Promise((async(t,n)=>{try{const n=await window.apis.doAction(["readFile",e]);t({text:()=>n})}catch(e){console.error(e),n(e)}})))}class w extends(_()){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose((()=>{this._unmount()}))}async load(){const{name:e,entry:t}=this._pluginLocal.options;if(this.loaded||!t)return;const{template:n,execScripts:r}=await v(t,{fetch:x});this._mount(n,document.body);const i=b(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;i.__shadow_mode__=!0,i.LSPluginLocal=this._pluginLocal,i.LSPluginShadow=this,i.LSPluginUser=i.logseq=new H(this._pluginLocal.toJSON(),this._pluginLocal.caller);const o=await r(i,!0);this._unmountFns.push(o.unmount),this._loaded=!0}_mount(e,t){const n=this._frame=document.createElement("div");n.classList.add("lsp-shadow-sandbox"),n.id=this._pluginLocal.id,this._root=n.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,t.appendChild(n),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const C=l()("LSPlugin:caller"),T="#await#response#",S="#lspmsg#error#",k=e=>`#lspmsg#${e}`;class L extends(_()){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const t=this,n=null!=this._pluginLocal;let r=0,i=0;const o=new Map,a=s(5e3),l=this._extendUserModel({"#lspmsg#ready#":async e=>{l[k(e?.pid)]=({type:e,payload:n})=>{C(`[call from host (_call)] ${this._debugTag}`,e,n),t.emit(e,n)},await a.resolve()},"#lspmsg#beforeunload#":async e=>{const n=s(1e4);t.emit("beforeunload",Object.assign({actor:n},e)),await n.promise},"#lspmsg#settings#":async({type:e,payload:n})=>{t.emit("settings:changed",n)},"#lspmsg#":async({ns:e,type:n,payload:r})=>{C(`[call from host (async)] ${this._debugTag}`,e,n,r),e&&e.startsWith("hook")?t.emit(`${e}:${n}`,r):t.emit(n,r)},"#lspmsg#reply#":({_sync:e,result:t})=>{if(C(`[sync reply] #${e}`,t),o.has(e)){const n=o.get(e);n&&(t?.hasOwnProperty(S)?n.reject(t[S]):n.resolve(t),o.delete(e))}},...e});if(n)return await a.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const c=new g(l).sendHandshakeReply();return this._status="pending",await c.then((e=>{this._child=e,this._connected=!0,this._call=async(t,n={},r)=>{if(r){const e=++i;o.set(e,r),n._sync=e,r.setTag(`async call #${e}`),C("async call #",e)}return e.emit(k(l.baseInfo.id),{type:t,payload:n}),r?.promise},this._callUserModel=async(e,t)=>{try{l[e](t)}catch(t){C(`[model method] #${e} not existed`)}},r=setInterval((()=>{if(o.size>100)for(const[e,t]of o)t.settled&&o.delete(e)}),18e5)})).finally((()=>{this._status=void 0})),await a.promise,l.baseInfo}async call(e,t={}){return this._call?.call(this,e,t)}async callAsync(e,t={}){const n=s(1e4);return this._call?.call(this,e,t,n)}async callUserModel(e,t={}){return this._callUserModel?.call(this,e,t)}async _setupIframeSandbox(){const e=this._pluginLocal,t=e.id,n=new URL(e.options.entry);n.searchParams.set("__v__",e.options.version);const r=document.querySelector(`#${t}`);r&&r.parentElement.removeChild(r);const i=document.createElement("div");i.classList.add("lsp-iframe-sandbox-container"),i.id=t;{const e=this._pluginLocal.settings.get("layout")?.[0];if(e){i.dataset.inited_layout="true";const{width:t,height:n,left:r,top:o}=e;Object.assign(i.style,{width:t+"px",height:n+"px",left:r+"px",top:o+"px"})}}document.body.appendChild(i);let o,s=new m({id:t+"_iframe",container:i,url:n.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise(((t,n)=>{o=setTimeout((()=>{n(new Error("handshake Timeout"))}),3e3),s.then((n=>{this._parent=n,this._connected=!0,this.emit("connected"),n.on(k(e.id),(({type:e,payload:t})=>{C("[call from plugin] ",e,t),this._pluginLocal?.emit(e,t||{})})),this._call=async(...t)=>{await n.call(k(e.id),{type:t[0],payload:Object.assign(t[1]||{},{$$pid:e.id})})},this._callUserModel=async(e,t)=>{if(e.startsWith(T))return await n.get(e.replace(T,""));n.call(e,t)},t(null)})).catch((e=>{n(e)})).finally((()=>{clearTimeout(o)}))})).catch((e=>{throw C("[iframe sandbox] error",e),e})).finally((()=>{this._status=void 0}))}async _setupShadowSandbox(){const e=this._pluginLocal,t=this._shadow=new w(e);try{this._status="pending",await t.load(),this._connected=!0,this.emit("connected"),this._call=async(t,n={},r)=>(r&&(n.actor=r),this._pluginLocal?.emit(t,Object.assign(n,{$$pid:e.id})),r?.promise),this._callUserModel=async(...e)=>{let t=e[0];t?.startsWith(T)&&(t=t.replace(T,""));const n=e[1]||{},r=this._userModel[t];"function"==typeof r&&await r.call(null,n)}}catch(e){throw C("[shadow sandbox] error",e),e}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}var A=function(){return(A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function E(e){return e.toLowerCase()}Object.create,Object.create;var O=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],F=/[^A-Z0-9]+/gi;function M(e,t,n){return t instanceof RegExp?e.replace(t,n):t.reduce((function(e,t){return e.replace(t,n)}),e)}class I{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,t){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,t]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}const j=Symbol.for("proxy-continue"),N=l()("LSPlugin:user");function z(e,t,n){if("function"!=typeof n)return!1;const{key:r,label:i,desc:o,palette:s,keybinding:a}=t,l=`SimpleCommandHook${r}${++R}`;this.Editor["on"+l](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:r,label:i,type:e,desc:o,keybinding:a},["editor/hook",l]],s]})}const P={registerCommand:z,registerCommandPalette(e,t){const{key:n,label:r,keybinding:i}=e;return z.call(this,"global-palette-command",{key:n,label:r,palette:!0,keybinding:i},t)},registerUIItem(e,t){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,e,t]})},registerPageMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,r=e;z.call(this,"page-menu-item",{key:n,label:r},t)},setFullScreen(e){const t=(...e)=>this._callWin("setFullScreen",...e);"toggle"===e?this._callWin("isFullScreen").then((e=>{e?t():t(!0)})):e?t(!0):t()}};let R=0;const D={registerSlashCommand(e,t){N("Register slash command #",this.baseInfo.id,e,t),"function"==typeof t&&(t=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",t]]),t=t.map((e=>{const[t,...n]=e;if("editor/hook"===t){let r=n[0],i=()=>{this.caller?.callUserModel(r)};"function"==typeof r&&(i=r);const o=`SlashCommandHook${t}${++R}`;e[1]=o,this.Editor["on"+o](i)}return e})),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[e,t]]})},registerBlockContextMenuItem(e,t){if("function"!=typeof t)return!1;const n=e+"_"+this.baseInfo.id,r=e;z.call(this,"block-context-menu-item",{key:n,label:r},t)},scrollToBlockInPage(e,t){const n="block-content-"+t;this.App.pushState("page",{name:e},{anchor:n})}},U={};class H extends(_()){_baseInfo;_caller;_connected=!1;_ui=new Map;_fileStorage;_beforeunloadCallback;constructor(e,t){super(),this._baseInfo=e,this._caller=t,t.on("sys:ui:visible",(e=>{e?.toggle&&this.toggleMainUI()})),t.on("settings:changed",(e=>{const t=Object.assign({},this.settings),n=Object.assign(this._baseInfo.settings,e);this.emit("settings:changed",{...n},t)})),t.on("beforeunload",(async e=>{const{actor:n,...r}=e,i=this._beforeunloadCallback;try{i&&await i(r),n?.resolve(null)}catch(e){console.debug(`${t.debugTag} [beforeunload] `,e),n?.reject(e)}})),this._fileStorage=new I(this)}async ready(e,t){if(!this._connected)try{"function"==typeof e&&(t=e,e={});let n=await this._caller.connectToParent(e);n=o(this._baseInfo,n),this._connected=!0,n?.id&&(this._caller.debugTag=`#${n.id} [${n.name}]`),t&&t.call(this,n)}catch(e){console.error("[LSPlugin Ready Error]",e)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){"function"==typeof e&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}updateSettings(e){this.caller.call("settings:update",e)}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const t={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}showMainUI(e){const t={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",t),this.emit("ui:visible:changed",t),this._ui.set(t.key,t)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(e,...n){try{const r=new URL(e);if(!r.origin)throw new Error(null);const i=t.join(e.substr(r.origin.length),...n);return r.origin+i}catch(r){return t.join(e,...n)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,t){const n=this,r=this.caller;return new Proxy(e,{get(e,i,o){const s=e[i];return function(...e){if(!s||s.apply(n,e)===j){if(t){const n=i.toString().match(/^(once|off|on)/i);if(null!=n){const i=n[0].toLowerCase(),s=n.input.slice(i.length),l=`hook:${t}:${o=s,void 0===a&&(a={}),function(e,t){return void 0===t&&(t={}),function(e,t){void 0===t&&(t={});for(var n=t.splitRegexp,r=void 0===n?O:n,i=t.stripRegexp,o=void 0===i?F:i,s=t.transform,a=void 0===s?E:s,l=t.delimiter,c=void 0===l?" ":l,u=M(M(e,r,"$1\0$2"),o,"\0"),p=0,h=u.length;"\0"===u.charAt(p);)p++;for(;"\0"===u.charAt(h-1);)h--;return u.slice(p,h).split("\0").map(a).join(c)}(e,A({delimiter:"."},t))}(o,A({delimiter:"_"},a))}`,c=e[0];return r[i](l,c),"off"!==i?()=>r.off(l,c):void 0}}var o,a;return r.callAsync("api:call",{tag:t,method:i,args:e})}}}})}_callWin(...e){return this._caller.callAsync("api:call",{method:"_callMainWin",args:e})}get App(){return this._makeUserProxy(P,"app")}get Editor(){return this._makeUserProxy(D,"editor")}get DB(){return this._makeUserProxy(U)}get FileStorage(){return this._fileStorage}}function B(e,t){return new H(e,t)}if(null==window.__LSP__HOST__){const e=new L(null);window.logseq=B({},e)}})()})();var t={};t=function(){function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var l=void 0;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return i(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}return e}()({1:[function(e,t,n){var r=e("./src/ParseError"),i=e("./src/Lexer"),o=e("./src/Parser"),s=e("./src/Renderer");function a(e,t){var n=new i(e),r=new o(n);return new s(r,t)}function l(e){try{MathJax.typeset([e])}catch(t){MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}}t.exports={ParseError:r,render:function(e,t,n){if(null==e)throw"input cannot be empty";var r=a(e,n),i=r.toDOM();return t&&t.appendChild(i),"mathjax"===r.backend.name&&l(i),i},renderToString:function(e,t){if(null==e)throw"input cannot be empty";var n=a(e,t);return"mathjax"===n.backend.name&&console.warn("Using MathJax backend -- math may not be rendered."),n.toMarkup()},renderElement:function(e,t){if(!(e instanceof Element))throw"a DOM element is required";e.style.display="none";var n=a(e.textContent,t),r=n.toDOM();e.replaceWith(r),n.backend&&"mathjax"===n.backend.name&&l(r)},renderClass:function(e,t){[].forEach.call(document.getElementsByClassName(e),(function(e){this.renderElement(e,t)}))}}},{"./src/Lexer":2,"./src/ParseError":3,"./src/Parser":4,"./src/Renderer":5}],2:[function(e,t,n){var r=e("./utils"),i=e("./ParseError"),o=function(e){this._input=e,this._remain=e,this._pos=0,this._nextAtom=this._currentAtom=null,this._next()};o.prototype.accept=function(e,t){return this._nextAtom.type===e&&this._matchText(t)?(this._next(),this._currentAtom.text):null},o.prototype.expect=function(e,t){var n=this._nextAtom;if(n.type!==e)throw new i("Expect an atom of "+e+" but received "+n.type,this._pos,this._input);if(!this._matchText(t))throw new i("Expect `"+t+"` but received `"+n.text+"`",this._pos,this._input);return this._next(),this._currentAtom.text},o.prototype.get=function(){return this._currentAtom};var s={special:/^(\\\\|\\{|\\}|\\\$|\\&|\\#|\\%|\\_)/,math:{exec:function(e){for(var t=[{start:"$",end:"$"},{start:"\\(",end:"\\)"}],n=e.length,r=0;r<t.length;r++){var o=t[r].start;if(0===e.indexOf(o))for(var s=t[r].end,a=o.length,l=e.slice(a);a<n;){var c=l.indexOf(s);if(c<0)throw new i("Math environment is not closed",this._pos,this._input);if(!(c>0&&"\\"===l[c-1]))return[e.slice(0,a+c+s.length),e.slice(o.length,a+c)];var u=c+s.length;l=l.slice(u),a+=u}}return null}},func:/^\\([a-zA-Z]+)/,open:/^\{/,close:/^\}/,quote:/^(`|``|'|'')/,ordinary:/^[^\\{}$&#%_\s]+/},a=/^%.*/,l=/^\s+/;o.prototype._skip=function(e){this._pos+=e,this._remain=this._remain.slice(e)},o.prototype._next=function(){for(var e=!1;;){var t=l.exec(this._remain);if(t){e=!0;var n=t[0].length;this._skip(n)}var r=a.exec(this._remain);if(!r)break;var o=r[0].length;this._skip(o)}if(this._currentAtom=this._nextAtom,""===this._remain)return this._nextAtom={type:"EOF",text:null,whitespace:!1},!1;for(var c in s){var u=s[c].exec(this._remain);if(u){var p=u[0],h=u[1]?u[1]:p;return this._nextAtom={type:c,text:h,whitespace:e},this._pos+=p.length,this._remain=this._remain.slice(u[0].length),!0}}throw new i("Unrecoganizable atom",this._pos,this._input)},o.prototype._matchText=function(e){return null==e||(r.isString(e)?e.toLowerCase()===this._nextAtom.text.toLowerCase():(e=e.map((function(e){return e.toLowerCase()}))).indexOf(this._nextAtom.text.toLowerCase())>=0)},t.exports=o},{"./ParseError":3,"./utils":6}],3:[function(e,t,n){function r(e,t,n){var r="Error: "+e;if(void 0!==t&&void 0!==n){r+=" at position "+t+": `",n=n.slice(0,t)+"↱"+n.slice(t);var i=Math.max(0,t-15),o=t+15;r+=n.slice(i,o)+"`"}this.message=r}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r},{}],4:[function(e,t,n){var r=e("./utils"),i=e("./ParseError"),o=function(e,t){this.type=e,this.value=t,this.children=[]};o.prototype.toString=function(e){e||(e=0);for(var t="",n=0;n<e;n++)t+="  ";var i=t+"<"+this.type+">";if(this.value&&(i+=" ("+r.toString(this.value)+")"),i+="\n",this.children)for(var o=0;o<this.children.length;o++)i+=this.children[o].toString(e+1);return i},o.prototype.addChild=function(e){if(!e)throw"argument cannot be null";this.children.push(e)};var s=function(e,t,n){this.type=e,this.value=t,this.children=null,this.whitespace=!!n};s.prototype=o.prototype;var a=function(e){this._lexer=e};a.prototype.parse=function(){for(var e=new o("root");;){var t,n=this._acceptEnvironment();if(null===n)break;if("algorithm"===n)t=this._parseAlgorithmInner();else{if("algorithmic"!==n)throw new i("Unexpected environment "+n);t=this._parseAlgorithmicInner()}this._closeEnvironment(n),e.addChild(t)}return this._lexer.expect("EOF"),e},a.prototype._acceptEnvironment=function(){var e=this._lexer;if(!e.accept("func","begin"))return null;e.expect("open");var t=e.expect("ordinary");return e.expect("close"),t},a.prototype._closeEnvironment=function(e){var t=this._lexer;t.expect("func","end"),t.expect("open"),t.expect("ordinary",e),t.expect("close")},a.prototype._parseAlgorithmInner=function(){for(var e=new o("algorithm");;){var t=this._acceptEnvironment();if(null===t){var n=this._parseCaption();if(!n)break;e.addChild(n)}else{if("algorithmic"!==t)throw new i("Unexpected environment "+t);var r=this._parseAlgorithmicInner();this._closeEnvironment(),e.addChild(r)}}return e},a.prototype._parseAlgorithmicInner=function(){for(var e,t=new o("algorithmic");;)if(e=this._parseStatement(l))t.addChild(e);else{if(!((e=this._parseBlock()).children.length>0))break;t.addChild(e)}return t},a.prototype._parseCaption=function(){var e=this._lexer;if(!e.accept("func","caption"))return null;var t=new o("caption");return e.expect("open"),t.addChild(this._parseCloseText()),e.expect("close"),t},a.prototype._parseBlock=function(){for(var e=new o("block");;){var t=this._parseControl();if(t)e.addChild(t);else{var n=this._parseFunction();if(n)e.addChild(n);else{var r=this._parseStatement(c);if(r)e.addChild(r);else{var i=this._parseCommand(u);if(i)e.addChild(i);else{var s=this._parseComment();if(!s)break;e.addChild(s)}}}}}return e},a.prototype._parseControl=function(){var e;return(e=this._parseIf())||(e=this._parseLoop())||(e=this._parseRepeat())||(e=this._parseUpon())?e:void 0},a.prototype._parseFunction=function(){var e=this._lexer;if(!e.accept("func",["function","procedure"]))return null;var t=this._lexer.get().text;e.expect("open");var n=e.expect("ordinary");e.expect("close"),e.expect("open");var r=this._parseCloseText();e.expect("close");var i=this._parseBlock();e.expect("func","end"+t);var s=new o("function",{type:t,name:n});return s.addChild(r),s.addChild(i),s},a.prototype._parseIf=function(){if(!this._lexer.accept("func","if"))return null;var e=new o("if");this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock());for(var t=0;this._lexer.accept("func",["elif","elsif","elseif"]);)this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),t++;var n=!1;return this._lexer.accept("func","else")&&(n=!0,e.addChild(this._parseBlock())),this._lexer.expect("func","endif"),e.value={numElif:t,hasElse:n},e},a.prototype._parseLoop=function(){if(!this._lexer.accept("func",["FOR","FORALL","WHILE"]))return null;var e=this._lexer.get().text.toLowerCase(),t=new o("loop",e);this._lexer.expect("open"),t.addChild(this._parseCond()),this._lexer.expect("close"),t.addChild(this._parseBlock());var n="forall"!==e?"end"+e:"endfor";return this._lexer.expect("func",n),t},a.prototype._parseRepeat=function(){if(!this._lexer.accept("func",["REPEAT"]))return null;var e=this._lexer.get().text.toLowerCase(),t=new o("repeat",e);return t.addChild(this._parseBlock()),this._lexer.expect("func","until"),this._lexer.expect("open"),t.addChild(this._parseCond()),this._lexer.expect("close"),t},a.prototype._parseUpon=function(){if(!this._lexer.accept("func","upon"))return null;var e=new o("upon");return this._lexer.expect("open"),e.addChild(this._parseCond()),this._lexer.expect("close"),e.addChild(this._parseBlock()),this._lexer.expect("func","endupon"),e};var l=["ensure","require","input","output"],c=["state","print","return"];a.prototype._parseStatement=function(e){if(!this._lexer.accept("func",e))return null;var t=this._lexer.get().text.toLowerCase(),n=new o("statement",t);return n.addChild(this._parseOpenText()),n};var u=["break","continue"];a.prototype._parseCommand=function(e){if(!this._lexer.accept("func",e))return null;var t=this._lexer.get().text.toLowerCase();return new o("command",t)},a.prototype._parseComment=function(){if(!this._lexer.accept("func","comment"))return null;var e=new o("comment");return this._lexer.expect("open"),e.addChild(this._parseCloseText()),this._lexer.expect("close"),e},a.prototype._parseCall=function(){var e=this._lexer;if(!e.accept("func","call"))return null;var t=e.get().whitespace;e.expect("open");var n=e.expect("ordinary");e.expect("close");var r=new o("call");r.whitespace=t,r.value=n,e.expect("open");var i=this._parseCloseText();return r.addChild(i),e.expect("close"),r},a.prototype._parseCond=a.prototype._parseCloseText=function(){return this._parseText("close")},a.prototype._parseOpenText=function(){return this._parseText("open")},a.prototype._parseText=function(e){for(var t,n=new o(e+"-text"),r=!1;;)if(t=this._parseAtom()||this._parseCall())r&&(t.whitespace|=r),n.addChild(t);else{if(!this._lexer.accept("open"))break;t=this._parseCloseText(),r=this._lexer.get().whitespace,t.whitespace=r,n.addChild(t),this._lexer.expect("close"),r=this._lexer.get().whitespace}return n};var p={ordinary:{tokenType:"ordinary"},math:{tokenType:"math"},special:{tokenType:"special"},"cond-symbol":{tokenType:"func",tokenValues:["and","or","not","true","false","to","downto"]},"quote-symbol":{tokenType:"quote"},"sizing-dclr":{tokenType:"func",tokenValues:["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"]},"font-dclr":{tokenType:"func",tokenValues:["normalfont","rmfamily","sffamily","ttfamily","upshape","itshape","slshape","scshape","bfseries","mdseries","lfseries"]},"font-cmd":{tokenType:"func",tokenValues:["textnormal","textrm","textsf","texttt","textup","textit","textsl","textsc","uppercase","lowercase","textbf","textmd","textlf"]},"text-symbol":{tokenType:"func",tokenValues:["textbackslash"]}};a.prototype._parseAtom=function(){for(var e in p){var t=p[e],n=this._lexer.accept(t.tokenType,t.tokenValues);if(null!==n){var r=this._lexer.get().whitespace;return"ordinary"!==e&&"math"!==e&&(n=n.toLowerCase()),new s(e,n,r)}}return null},t.exports=a},{"./ParseError":3,"./utils":6}],5:[function(e,t,n){var r=e("./utils");function i(e){this._css={},this._fontSize=this._outerFontSize=void 0!==e?e:1}function o(e,t){this._nodes=e,this._textStyle=t}function s(){this._body=[],this._textBuf=[]}i.prototype.outerFontSize=function(e){return void 0!==e&&(this._outerFontSize=e),this._outerFontSize},i.prototype.fontSize=function(){return this._fontSize},i.prototype._fontCommandTable={normalfont:{"font-family":"KaTeX_Main"},rmfamily:{"font-family":"KaTeX_Main"},sffamily:{"font-family":"KaTeX_SansSerif"},ttfamily:{"font-family":"KaTeX_Typewriter"},bfseries:{"font-weight":"bold"},mdseries:{"font-weight":"medium"},lfseries:{"font-weight":"lighter"},upshape:{"font-style":"normal","font-variant":"normal"},itshape:{"font-style":"italic","font-variant":"normal"},scshape:{"font-style":"normal","font-variant":"small-caps"},slshape:{"font-style":"oblique","font-variant":"normal"},textnormal:{"font-family":"KaTeX_Main"},textrm:{"font-family":"KaTeX_Main"},textsf:{"font-family":"KaTeX_SansSerif"},texttt:{"font-family":"KaTeX_Typewriter"},textbf:{"font-weight":"bold"},textmd:{"font-weight":"medium"},textlf:{"font-weight":"lighter"},textup:{"font-style":"normal","font-variant":"normal"},textit:{"font-style":"italic","font-variant":"normal"},textsc:{"font-style":"normal","font-variant":"small-caps"},textsl:{"font-style":"oblique","font-variant":"normal"},uppercase:{"text-transform":"uppercase"},lowercase:{"text-transform":"lowercase"}},i.prototype._sizingScalesTable={tiny:.68,scriptsize:.8,footnotesize:.85,small:.92,normalsize:1,large:1.17,Large:1.41,LARGE:1.58,huge:1.9,Huge:2.28},i.prototype.updateByCommand=function(e){var t=this._fontCommandTable[e];if(void 0===t){var n=this._sizingScalesTable[e];if(void 0!==n)return this._outerFontSize=this._fontSize,void(this._fontSize=n);throw new ParserError("unrecogniazed text-style command")}for(var r in t)this._css[r]=t[r]},i.prototype.toCSS=function(){var e="";for(var t in this._css){var n=this._css[t];void 0!==n&&(e+=t+":"+n+";")}return this._fontSize!==this._outerFontSize&&(e+="font-size:"+this._fontSize/this._outerFontSize+"em;"),e},o.prototype._renderCloseText=function(e,t){var n=new i(this._textStyle.fontSize()),r=new o(e.children,n);e.whitespace&&this._html.putText(" "),this._html.putHTML(r.renderToHTML(t))},o.prototype.renderToHTML=function(e){var t;for(this._html=new s;void 0!==(t=this._nodes.shift());){var n=t.type,r=t.value;switch(t.whitespace&&this._html.putText(" "),n){case"ordinary":this._html.putText(r);break;case"math":if(void 0===e)throw"No math backend found. Please setup KaTeX or MathJax.";if("katex"===e.name)this._html.putHTML(e.driver.renderToString(r));else{if("mathjax"!==e.name)throw"Unknown math backend "+e;this._html.putText("$"+r+"$")}break;case"cond-symbol":this._html.beginSpan("ps-keyword").putText(r.toLowerCase()).endSpan();break;case"special":if("\\\\"===r){this._html.putHTML("<br/>");break}var a={"\\{":"{","\\}":"}","\\$":"$","\\&":"&","\\#":"#","\\%":"%","\\_":"_"}[r];this._html.putText(a);break;case"text-symbol":var l={textbackslash:"\\"}[r];this._html.putText(l);break;case"quote-symbol":var c={"`":"‘","``":"“","'":"’","''":"”"}[r];this._html.putText(c);break;case"call":this._html.beginSpan("ps-funcname").putText(r).endSpan(),this._html.write("(");var u=t.children[0];this._renderCloseText(u,e),this._html.write(")");break;case"close-text":this._renderCloseText(t,e);break;case"font-dclr":case"sizing-dclr":this._textStyle.updateByCommand(r),this._html.beginSpan(null,this._textStyle.toCSS());var p=new o(this._nodes,this._textStyle);this._html.putHTML(p.renderToHTML(e)),this._html.endSpan();break;case"font-cmd":var h=this._nodes[0];if("close-text"!==h.type)continue;var d=new i(this._textStyle.fontSize());d.updateByCommand(r),this._html.beginSpan(null,d.toCSS());var f=new o(h.children,d);this._html.putHTML(f.renderToHTML(e)),this._html.endSpan();break;default:throw new ParseError("Unexpected ParseNode of type "+t.type)}}return this._html.toMarkup()},s.prototype.beginDiv=function(e,t,n){return this._beginTag("div",e,t,n),this._body.push("\n"),this},s.prototype.endDiv=function(){return this._endTag("div"),this._body.push("\n"),this},s.prototype.beginP=function(e,t,n){return this._beginTag("p",e,t,n),this._body.push("\n"),this},s.prototype.endP=function(){return this._flushText(),this._endTag("p"),this._body.push("\n"),this},s.prototype.beginSpan=function(e,t,n){return this._flushText(),this._beginTag("span",e,t,n)},s.prototype.endSpan=function(){return this._flushText(),this._endTag("span")},s.prototype.putHTML=function(e){return this._flushText(),this._body.push(e),this},s.prototype.putText=function(e){return this._textBuf.push(e),this},s.prototype.write=function(e){this._body.push(e)},s.prototype.toMarkup=function(){return this._flushText(),this._body.join("").trim()},s.prototype.toDOM=function(){var e=this.toMarkup(),t=document.createElement("div");return t.innerHTML=e,t.firstChild},s.prototype._flushText=function(){if(0!==this._textBuf.length){var e=this._textBuf.join("");this._body.push(this._escapeHtml(e)),this._textBuf=[]}},s.prototype._beginTag=function(e,t,n,i){var o="<"+e;if(t&&(o+=' class="'+t+'"'),n){var s;if(r.isString(n))s=n;else for(var a in s="",n)attrVal=n[a],s+=a+":"+attrVal+";";i&&(s+=i),o+=' style="'+s+'"'}return o+=">",this._body.push(o),this},s.prototype._endTag=function(e){return this._body.push("</"+e+">"),this};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function l(e){e=e||{},this.indentSize=e.indentSize?this._parseEmVal(e.indentSize):1.2,this.commentDelimiter=void 0!==e.commentDelimiter?e.commentDelimiter:" // ",this.lineNumberPunc=void 0!==e.lineNumberPunc?e.lineNumberPunc:":",this.lineNumber=void 0!==e.lineNumber&&e.lineNumber,this.noEnd=void 0!==e.noEnd&&e.noEnd,void 0!==e.captionCount&&(c.captionCount=e.captionCount),this.titlePrefix=void 0!==e.titlePrefix?e.titlePrefix:"Algorithm"}function c(t,n){this._root=t.parse(),this._options=new l(n),this._openLine=!1,this._blockLevel=0,this._textLevel=-1,this._globalTextStyle=new i,this.backend=void 0;try{"undefined"==typeof katex&&(katex=e("katex"))}catch(e){}try{"undefined"==typeof MathJax&&(MathJax=e("mathjax"))}catch(e){}"undefined"!=typeof katex?this.backend={name:"katex",driver:katex}:"undefined"!=typeof MathJax&&(this.backend={name:"mathjax",driver:MathJax})}s.prototype._escapeHtml=function(e){return String(e).replace(/[&<>"'/]/g,(function(e){return a[e]}))},l.prototype._parseEmVal=function(e){if((e=e.trim()).indexOf("em")!==e.length-2)throw"option unit error; no `em` found";return Number(e.substring(0,e.length-2))},c.captionCount=0,c.prototype.toMarkup=function(){var e=this._html=new s;return this._buildTree(this._root),delete this._html,e.toMarkup()},c.prototype.toDOM=function(){var e=this.toMarkup(),t=document.createElement("div");return t.innerHTML=e,t.firstChild},c.prototype._beginGroup=function(e,t,n){this._closeLineIfAny(),this._html.beginDiv("ps-"+e+(t?" "+t:""),n)},c.prototype._endGroup=function(e){this._closeLineIfAny(),this._html.endDiv()},c.prototype._beginBlock=function(){var e=this._options.lineNumber&&0===this._blockLevel?.6:0,t=this._options.indentSize+e;this._beginGroup("block",null,{"margin-left":t+"em"}),this._blockLevel++},c.prototype._endBlock=function(){this._closeLineIfAny(),this._endGroup(),this._blockLevel--},c.prototype._newLine=function(){this._closeLineIfAny(),this._openLine=!0,this._globalTextStyle.outerFontSize(1);var e=this._options.indentSize;this._blockLevel>0?(this._numLOC++,this._html.beginP("ps-line ps-code",this._globalTextStyle.toCSS()),this._options.lineNumber&&this._html.beginSpan("ps-linenum",{left:-(this._blockLevel-1)*(1.25*e)+"em"}).putText(this._numLOC+this._options.lineNumberPunc).endSpan()):this._html.beginP("ps-line",{"text-indent":-e+"em","padding-left":e+"em"},this._globalTextStyle.toCSS())},c.prototype._closeLineIfAny=function(){this._openLine&&(this._html.endP(),this._openLine=!1)},c.prototype._typeKeyword=function(e){this._html.beginSpan("ps-keyword").putText(e).endSpan()},c.prototype._typeFuncName=function(e){this._html.beginSpan("ps-funcname").putText(e).endSpan()},c.prototype._typeText=function(e){this._html.write(e)},c.prototype._buildTreeForAllChildren=function(e){for(var t=e.children,n=0;n<t.length;n++)this._buildTree(t[n])},c.prototype._buildCommentsFromBlock=function(e){for(var t=e.children;t.length>0&&"comment"===t[0].type;){var n=t.shift();this._buildTree(n)}},c.prototype._buildTree=function(e){var t,n,r;switch(e.type){case"root":this._beginGroup("root"),this._buildTreeForAllChildren(e),this._endGroup();break;case"algorithm":var s;for(t=0;t<e.children.length;t++)"caption"===(n=e.children[t]).type&&(s=n,c.captionCount++);for(s?(this._beginGroup("algorithm","with-caption"),this._buildTree(s)):this._beginGroup("algorithm"),t=0;t<e.children.length;t++)"caption"!==(n=e.children[t]).type&&this._buildTree(n);this._endGroup();break;case"algorithmic":this._options.lineNumber?(this._beginGroup("algorithmic","with-linenum"),this._numLOC=0):this._beginGroup("algorithmic"),this._buildTreeForAllChildren(e),this._endGroup();break;case"block":this._beginBlock(),this._buildTreeForAllChildren(e),this._endBlock();break;case"function":var a=e.value.type.toLowerCase(),l=e.value.name;r=e.children[0];var u=e.children[1];this._newLine(),this._typeKeyword(a+" "),this._typeFuncName(l),this._typeText("("),this._buildTree(r),this._typeText(")"),this._buildCommentsFromBlock(u),this._buildTree(u),this._options.noEnd||(this._newLine(),this._typeKeyword("end "+a));break;case"if":this._newLine(),this._typeKeyword("if "),ifCond=e.children[0],this._buildTree(ifCond),this._typeKeyword(" then");var p=e.children[1];this._buildCommentsFromBlock(p),this._buildTree(p);for(var h=e.value.numElif,d=0;d<h;d++){this._newLine(),this._typeKeyword("else if ");var f=e.children[2+2*d];this._buildTree(f),this._typeKeyword(" then");var m=e.children[2+2*d+1];this._buildCommentsFromBlock(m),this._buildTree(m)}if(e.value.hasElse){this._newLine(),this._typeKeyword("else");var g=e.children[e.children.length-1];this._buildCommentsFromBlock(g),this._buildTree(g)}this._options.noEnd||(this._newLine(),this._typeKeyword("end if"));break;case"loop":this._newLine();var y=e.value,_={for:"for",forall:"for all",while:"while"};this._typeKeyword(_[y]+" ");var v=e.children[0];this._buildTree(v),this._typeKeyword(" do");var b=e.children[1];if(this._buildCommentsFromBlock(b),this._buildTree(b),!this._options.noEnd){this._newLine();var x="while"===y?"end while":"end for";this._typeKeyword(x)}break;case"repeat":this._newLine(),this._typeKeyword("repeat");var w=e.children[0];this._buildCommentsFromBlock(w),this._buildTree(w),this._newLine(),this._typeKeyword("until ");var C=e.children[1];this._buildTree(C);break;case"upon":this._newLine(),this._typeKeyword("upon "),uponCond=e.children[0],this._buildTree(uponCond);var T=e.children[1];this._buildCommentsFromBlock(T),this._buildTree(T),this._options.noEnd||(this._newLine(),this._typeKeyword("end upon"));break;case"command":var S={break:"break",continue:"continue"}[e.value];this._newLine(),S&&this._typeKeyword(S);break;case"caption":this._newLine(),this._typeKeyword(this._options.titlePrefix+" "+c.captionCount+" "),r=e.children[0],this._buildTree(r);break;case"comment":r=e.children[0],this._html.beginSpan("ps-comment"),this._html.putText(this._options.commentDelimiter),this._buildTree(r),this._html.endSpan();break;case"statement":var k={state:"",ensure:"Ensure: ",require:"Require: ",input:"Input: ",output:"Output: ",print:"print ",return:"return "}[e.value];this._newLine(),k&&this._typeKeyword(k),r=e.children[0],this._buildTree(r);break;case"open-text":var L=new o(e.children,this._globalTextStyle);this._html.putHTML(L.renderToHTML(this.backend));break;case"close-text":var A=new i(this._globalTextStyle.fontSize()),E=new o(e.children,A);this._html.putHTML(E.renderToHTML(this.backend));break;default:throw new ParseError("Unexpected ParseNode of type "+e.type)}},t.exports=c},{"./utils":6,katex:void 0,mathjax:void 0}],6:[function(e,t,n){function r(e){return"string"==typeof e||e instanceof String}function i(e){return"object"==typeof e&&e instanceof Object}function o(e){if(!i(e))return e+"";var t=[];for(var n in e)t.push(n+": "+o(e[n]));return t.join(", ")}t.exports={isString:r,isObject:i,toString:o}},{}]},{},[1])(1);logseq.ready((async()=>{console.log("Pseudocode plugin loaded!"),logseq.Editor.registerBlockContextMenuItem("Pseudocode",(async n=>{!async function(n){const r=await logseq.Editor.getBlock(n.uuid);console.log(r.content);try{console.log(await e(t)(r.content,{lineNumber:!0}))}catch(e){console.log(e.name),console.log(e.message)}console.log("Whattt")}(n)}))})).catch(console.error);